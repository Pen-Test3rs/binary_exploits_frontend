import './App.css';
import { Route, Switch, withRouter } from 'react-router-dom';
import LoginComponent from './components/login/loginComponent';
import React from 'react';
import withContainer from './components/container/container';
import DashboardComponent from './components/dashboard/dashboardComponent';
import RegisterComponent from './components/register/registerComponent';
import withToasts from './components/toast/toastComponent';
import { compose } from 'redux';
import withAppContext from './context/appContext';
import ArticlesComponent from './components/articles/articlesComponent';
import UserProfileComponent from './components/profile/userProfileComponent';
import PrivateRoute from './components/shared/privateRoute';
import HomePageComponent from './components/homepage/homePageComponent';
import TasksComponent from './components/tasks/tasks';

const loginNeededText = 'You have to be logged in!';

const AppInternal = () => {
    return (
        <>
            <Switch>
                <Route exact path={'/'} component={HomePageComponent} />

                <PrivateRoute redirectPath={'/dashboard'} reverse exact path={'/login'} component={LoginComponent} />

                <PrivateRoute
                    path={'/register'}
                    exact
                    component={RegisterComponent}
                    redirectPath={'/dashboard'}
                    reverse
                />

                <PrivateRoute
                    path={'/dashboard'}
                    exact
                    component={DashboardComponent}
                    redirectPath={'/login'}
                    redirectText={loginNeededText}
                />

                <PrivateRoute
                    path={'/profile'}
                    exact
                    component={UserProfileComponent}
                    redirectPath={'/login'}
                    redirectText={loginNeededText}
                />

                <Route exact path={'/articles'} component={ArticlesComponent} />

                <PrivateRoute
                    path={'/tasks'}
                    exact
                    component={TasksComponent}
                    redirectPath={'/login'}
                    redirectText={loginNeededText}
                />
            </Switch>
        </>
    );
};

const App = compose(withAppContext, withRouter, withToasts, withContainer)(AppInternal);

export default App;

import './App.css';
import { Route, Switch, withRouter } from 'react-router-dom';
import LoginComponent from './components/login/loginComponent';
import React from 'react';
import withContainer from './components/container/container';
import DashboardComponent from './components/dashboard/dashboardComponent';
import RegisterComponent from './components/register/registerComponent';
import withToasts from './components/toast/toastComponent';
import { compose } from 'redux';
import withAppContext from './context/appContext';
import ArticleListContainer from './components/articles/list/articleListContainer';
import UserProfileComponent from './components/profile/userProfileComponent';
import PrivateRoute from './components/shared/privateRoute';
import HomePageComponent from './components/homepage/homePageComponent';
import TaskListComponent from './components/tasks/list/taskListComponent';
import SingleArticleComponent from './components/articles/single/singleArticleComponent';
import SettingsComponent from './components/settings/settingsComponent';

const loginNeededText = 'Musisz byÄ‡ zalogowany!';

const AppInternal = () => {
    return (
        <Switch>
            <PrivateRoute exact path={'/'} component={HomePageComponent} redirectPath={'/login'} reverse />

            <PrivateRoute path={'/login'} exact component={LoginComponent} redirectPath={'/dashboard'} reverse />

            <PrivateRoute path={'/register'} exact component={RegisterComponent} redirectPath={'/dashboard'} reverse />

            <Route exact path={'/dashboard'} component={DashboardComponent} />

            <Route exact path={'/articles'} component={ArticleListContainer} />
            <Route exact path={'/articles/:id'} component={SingleArticleComponent} />

            <Route exact path={'/profile/:id'} component={UserProfileComponent} />
            <PrivateRoute
                path={'/settings'}
                exact
                component={SettingsComponent}
                redirectPath={'/login'}
                redirectText={loginNeededText}
            />

            <PrivateRoute
                path={'/tasks'}
                exact
                component={TaskListComponent}
                redirectPath={'/login'}
                redirectText={loginNeededText}
            />
        </Switch>
    );
};

const App = compose<React.ComponentType>(withAppContext, withRouter, withToasts, withContainer)(AppInternal);

export default App;

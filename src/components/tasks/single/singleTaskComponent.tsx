import React from 'react';
import { Task } from '../../../models/task';
import { taskService } from '../../../services/taskService';
import SingleTaskContent from './singleTaskContent';
import useAxiosEffect from '../../generic/useAxiosEffect';
import ComponentStateHandler from '../../generic/componentStateHandler';

interface SingleTaskComponentProps {
    id: number;
    refreshTasksCallback: (() => void) | undefined;
}

const SingleTaskComponent = ({ id, refreshTasksCallback }: SingleTaskComponentProps) => {
    const state = useAxiosEffect<Task>((opt) => taskService.getOne(id), []);
    const task = state.data as Task;

    return <ComponentStateHandler state={state}>
        <SingleTaskContent task={task} refreshTasksCallback={refreshTasksCallback} />
    </ComponentStateHandler>
};

export default SingleTaskComponent;

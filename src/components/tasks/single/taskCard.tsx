import React, { useState } from 'react';
import { TaskCardData, TaskStatus } from '../../../models/task';
import Card from '../../generic/card';
import TaskCardContent from './taskCardContent';
import TaskModal from './taskModal';
import { getLevelToTextAndColor } from '../levelToTextAndColor';

interface TaskCardProps {
    taskData: TaskCardData;
}

const TaskCard = ({ taskData }: TaskCardProps) => {
    const { id, title, labels, status, level, points } = taskData;
    const { color, levelText } = getLevelToTextAndColor(level);

    const [modalIsOpen, setModalIsOpen] = useState(false);

    return (
        <div className="flex-auto w-full">
            <TaskModal taskId={id} modalIsOpen={modalIsOpen} setModalIsOpen={setModalIsOpen} />
            <button
                disabled={taskData.status == TaskStatus.BLOCKED}
                className="w-full focus:outline-none"
                onClick={() => setModalIsOpen(true)}
            >
                <Card title={title} labelText={levelText} labelColor={color} tags={labels} taskStatus={status}>
                    <TaskCardContent points={points} />
                </Card>
            </button>
        </div>
    );
};

export default TaskCard;

import React, { useState } from 'react';
import { TaskCardData } from '../../../models/task';
import Card from '../../generic/card';
import TaskCardContent from './taskCardContent';
import TaskModal from './taskModal';
import { getLevelToTextAndColor } from '../levelToTextAndColor';

interface TaskCardProps {
    taskData: TaskCardData;
    refreshTasksCallback?: () => void;
}

const TaskCard = ({ taskData, refreshTasksCallback }: TaskCardProps) => {
    const { color, levelText } = getLevelToTextAndColor(taskData.level);

    const [modalIsOpen, setModalIsOpen] = useState(false);

    return (
        <div className="flex-auto w-full ">
            <TaskModal
                taskId={taskData.id}
                modalIsOpen={modalIsOpen}
                setModalIsOpen={setModalIsOpen}
                refreshTasksCallback={refreshTasksCallback}
            />
            <div onClick={() => setModalIsOpen(true)} className="w-full min-h-full">
                <Card
                    title={taskData.title}
                    labelText={levelText}
                    labelColor={color}
                    tags={taskData.labels}
                    taskStatus={taskData.status}
                >
                    <TaskCardContent points={taskData.points} />
                </Card>
            </div>
        </div>
    );
};

export default TaskCard;

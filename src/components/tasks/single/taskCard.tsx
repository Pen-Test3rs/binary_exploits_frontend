import React, { Dispatch, SetStateAction } from 'react';
import { TaskCardData, TaskStatus } from '../../../models/task';
import Card from '../../generic/card';
import TaskCardContent from './taskCardContent';
import { getLevelToTextAndColor } from '../levelToTextAndColor';

interface TaskCardProps {
    taskData: TaskCardData;
    setTaskId: Dispatch<SetStateAction<number>>;
    setModalIsOpen: Dispatch<SetStateAction<boolean>>;
}

const TaskCard = ({ taskData, setTaskId, setModalIsOpen }: TaskCardProps) => {
    const { id, title, labels, status, level, points } = taskData;
    const { color, levelText } = getLevelToTextAndColor(level);

    return (
        <>
            <button
                disabled={taskData.status === TaskStatus.BLOCKED}
                className="w-full focus:outline-none"
                onClick={() => {
                    setTaskId(id);
                    setModalIsOpen(true);
                }}
            >
                <Card title={title} labelText={levelText} labelColor={color} tags={labels} taskStatus={status}>
                    <TaskCardContent points={points} />
                </Card>
            </button>
        </>
    );
};

export default TaskCard;

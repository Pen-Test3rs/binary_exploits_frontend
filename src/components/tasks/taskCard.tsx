import React, { useState } from 'react';
import { TaskCardData } from '../../models/task';
import Card from '../generic/card';
import TaskCardContent from './taskCardContent';
import TaskModal from './taskModal';
import { getLevelToTextAndColor } from './levelToTextAndColor';
import { wrapTags } from './wrapTasks';

interface TaskCardProps {
    taskData: TaskCardData;
}

const TaskCard = ({ taskData }: TaskCardProps) => {
    const taskId = `/tasks/${taskData.id}`;

    const { color, levelText } = getLevelToTextAndColor(taskData.level);

    const [modalIsOpen, setModalIsOpen] = useState(false);

    return (
        <div className="flex justify-center w-full md:w-1/2 lg:w-4/12 py-4 px-2">
            <TaskModal taskId={taskData.id} modalIsOpen={modalIsOpen} setModalIsOpen={setModalIsOpen} />
            <div onClick={() => setModalIsOpen(true)} className="w-full">
                <Card
                    title={taskData.title}
                    content={<TaskCardContent points={taskData.points} />}
                    labelText={levelText as string}
                    labelColor={color}
                    tags={wrapTags(taskData.labels)}
                    status={taskData.status}
                />
            </div>
        </div>
    );
};

export default TaskCard;

import { RouteComponentProps } from 'react-router-dom';
import React from 'react';
import { Article } from '../../../models/article';
import { articleService } from '../../../services/articleService';
import SingleArticleContent from './singleArticleContent';
import useAxiosEffect from '../../generic/useAxiosEffect';
import ComponentStateHandler from '../../generic/componentStateHandler';

type TParams = {
    id: string;
};

const SingleArticleComponent = ({ match }: RouteComponentProps<TParams>) => {
    const id = match.params.id;

    const state = useAxiosEffect<Article>(
        (opt) => articleService.getOne(id, opt),
        [id]
    )
    const {data} = state;

    return (
        <ComponentStateHandler state={state}>
            <SingleArticleContent article={data as Article} />
        </ComponentStateHandler>
    );
};

export default SingleArticleComponent;

import React, { useEffect, useState } from 'react';
import { apiUrls } from '../../utils/apiUrls';
import { articlesService } from '../../services/articlesService';
import { ArticleCategory } from '../../models/article';
import ArticleCategoryComponent from './articleCategoryComponent';
import ArticlesContainer from '../styled-components/articles/ArticlesContainer';

const ArticlesComponent = () => {
    const [categories, setCategories] = useState<ArticleCategory[]>([]);

    useEffect(() => {
        articlesService
            .getAll(apiUrls.ARTICLES)
            .then((res) => {
                console.log(res);
                setCategories(res);
            })
            .catch((err) => {
                //TODO: handle error
                console.error(err);
            });
    }, []);

    return (
        <ArticlesContainer>
            {categories.map((ac) => {
                return <ArticleCategoryComponent key={ac.id} category={ac} />;
            })}
        </ArticlesContainer>
    );
};

export default ArticlesComponent;

import React, { useEffect, useState } from 'react';
import Button from '../tailwind-styled-components/button';
import axiosInstance from '../../utils/axiosInterceptors';
import { apiUrls } from '../../utils/apiUrls';
import SingleArticleContent from './SingleArticleContent';


const ArticlesComponent = () => {


    const [content, setContent] = useState<any>(undefined)

    const makeRequest = () => {
        axiosInstance
            .get(apiUrls.ME)
            .then((res) => {
                console.log('TEST REQUEST SUCCESS');
                console.log(res.data);
            })
            .catch((err) => {
                console.error('TEST REQUEST FAILED');
            });
    };

    useEffect(() => {(async () => {
        const result = await axiosInstance.get(apiUrls.CONTENT);
        console.log(result);
        const data = result.data;
        const article = data[0].subcategories[0].content;
        setContent(article);


    })()},[])

    return (
        <>
            <Button onClick={makeRequest}>Make request that requires auth</Button>
            <div className="container mx-auto bg-gray-200 min-h-screen min-w-full">
                <SingleArticleContent text={content}/>
            </div>
        </>
    );
};

export default ArticlesComponent;
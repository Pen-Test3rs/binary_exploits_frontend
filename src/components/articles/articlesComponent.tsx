import React, { useEffect, useState } from 'react';
import { apiUrls } from '../../utils/apiUrls';
import { articlesService } from '../../services/contentService';
import { ArticlesList } from '../../models/article';

const ArticlesComponent = () => {
    const [articles, setArticles] = useState<ArticlesList[]>([]);

    useEffect(() => {
        (async () => {
            articlesService
                .get(apiUrls.ARTICLES)
                .then((a) => {
                    console.log(a);
                    setArticles(a);
                })
                .catch((err) => {
                    //TODO: handle error
                });
        })();
    }, []);

    return (
        <>
            {articles.map((a) => {
                return (
                    <div key={a.id}>
                        <p>{a.name}</p>
                        <p>{a.description}</p>
                        <p>{a.subcategories.length} articles</p>
                    </div>
                );
            })}
        </>
    );
};

export default ArticlesComponent;

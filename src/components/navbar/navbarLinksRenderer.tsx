import React from 'react';
import NavbarLink from './navbarLink';
import { useAppSelector } from '../../context/hooks';
import { isLoggedIn, userData } from '../../context/userReducer';

interface NavbarLinksRendererProps {
    mobile: boolean;
    additionalActions?: (() => void)[];
}

interface LinkProps {
    to: string;
    text: string;
    show?: boolean;
}

const NavbarLinksRenderer = ({ mobile, additionalActions = [] }: NavbarLinksRendererProps) => {
    const logged = useAppSelector(isLoggedIn);
    const user = useAppSelector(userData);

    const navbarLinks: LinkProps[] = [
        {
            to: '/dashboard',
            text: 'Dashboard'
        },
        {
            to: '/challenges',
            text: 'Challenges'
        },
        {
            to: '/articles',
            text: 'Articles'
        },
        {
            to: '/login',
            text: 'Login',
            show: !logged
        },
        {
            to: '/register',
            text: 'Register',
            show: !logged
        }
    ];

    return (
        <>
            {navbarLinks
                .filter(({ show = true }: LinkProps) => show)
                .map(({ to, text }) => {
                    return (
                        <NavbarLink
                            to={to}
                            text={text}
                            mobile={mobile}
                            onClickActions={additionalActions || []}
                            key={text}
                        />
                    );
                })}
            {logged && <div className="text-gray-300 px-3 py-2 font-medium text-sm">Logged as: {user.username}</div>}
        </>
    );
};

export default NavbarLinksRenderer;

import React from 'react';
import NavbarLink from './navbarLink';
import { useAppSelector } from '../../context/hooks';
import { isLoggedIn } from '../../context/userReducer';

interface NavbarLinksRendererProps {
    mobile: boolean;
}

interface LinkProps {
    to: string;
    text: string;
    show?: boolean;
    onlyMobile?: boolean;
}

const NavbarLinksRenderer = ({ mobile }: NavbarLinksRendererProps) => {
    const logged = useAppSelector(isLoggedIn);

    const navbarLinks: LinkProps[] = [
        {
            to: '/',
            text: 'Strona główna',
            onlyMobile: true,
            show: !logged
        },
        {
            to: '/dashboard',
            text: 'Dashboard'
        },
        {
            to: '/articles',
            text: 'Baza wiedzy'
        },
        {
            to: '/tasks',
            text: 'Zadania',
            show: logged
        }
    ];

    return (
        <>
            {navbarLinks
                .filter(({ show = true }: LinkProps) => show)
                .filter(({ onlyMobile = false }: LinkProps) => mobile || !onlyMobile)
                .map(({ to, text }) => {
                    return <NavbarLink to={to} text={text} additionalStyles={mobile ? 'block' : ''} key={text} />;
                })}
        </>
    );
};

export default NavbarLinksRenderer;

import SubMenuNavbarLinksRenderer from './submenuNavbarLinksRenderer';
import React, { useState } from 'react';
import { useDetectClickOutside } from 'react-detect-click-outside';

const SubmenuNavbar = () => {
    const [submenuVisible, setSubmenuVisible] = useState(false);

    const toggleSubmenu = () => {
        setSubmenuVisible(!submenuVisible);
    };

    const hideSubMenu = () => {
        setSubmenuVisible(false);
    };

    const ref = useDetectClickOutside({
        onTriggered: hideSubMenu
    });

    return (
        <div
            className="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"
            ref={ref}
        >
            <div className="ml-3 relative">
                <button
                    type="button"
                    className="flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"
                    onClick={toggleSubmenu}
                >
                    <img
                        className="h-11 w-11 rounded-full"
                        src="https://www.pikpng.com/pngl/m/80-805523_default-avatar-svg-png-icon-free-download-264157.png"
                        alt=""
                    />
                </button>

                {submenuVisible && <SubMenuNavbarLinksRenderer hideSubMenu={hideSubMenu} />}
            </div>
        </div>
    );
};

export default SubmenuNavbar;

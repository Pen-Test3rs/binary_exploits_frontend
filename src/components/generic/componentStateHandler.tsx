import React, { PropsWithChildren } from 'react';
import { AxiosError } from 'axios';
import { LoadingComponent } from './loadingComponent';
import { ErrorComponent } from './errorComponent';

export interface IStateHandlerData<T> {
    isLoading: boolean;
    error: AxiosError | undefined;
    data: T | undefined;
}

interface StateHandlerInterface<T> {
    state: IStateHandlerData<T>;
}

export const ComponentStateHandler = ({
    children,
    state: { error, isLoading, data }
}: PropsWithChildren<StateHandlerInterface<any>>) => {
    if (isLoading) {
        return <LoadingComponent />;
    }

    if (error || data === undefined) {
        return <ErrorComponent desc={error?.message} />;
    }

    return <>{children}</>;
};

import { PropsWithChildren } from 'react';
import { AxiosError } from 'axios';
import LoadingSpinner from '../spinner/loadingSpinner';

export interface IStateHandlerData<T>{
    isLoading: boolean;
    error: AxiosError | undefined;
    data: T | undefined;
}

interface StateHandlerInterface<T> {
    state: IStateHandlerData<T>;
}

const ComponentStateHandler = ({ children, state: {error, isLoading, data} }: PropsWithChildren<StateHandlerInterface<any>>) => {
    if(isLoading){
        return <LoadingSpinner/> //TODO: Full page spinner
    }

    if(error || data === undefined){
        return <div>Error</div> //TODO: toast? banner?
    }

    return <>{children}</>
};

export default ComponentStateHandler;
import React from 'react';
import { useAppSelector } from '../../context/hooks';
import { userData } from '../../context/userReducer';
import RecentlySolved from './recentlySolved';
import formatDate from '../../utils/dateFormatter';
import ProgressStats from './progressStats';

//TODO: profile info, delete account, chart with progress, progress tracker
const UserProfileComponent = () => {
    //TODO: get user data from API if viewing someone else profile
    const user = useAppSelector(userData);

    return (
        <div className="md:flex md:-mx-2">
            <div className="md:w-4/12 md:mx-2 md:rounded-md rounded-t-md bg-white p-5 shadow-2xl">
                <div className="image">
                    <img className="h-32 w-32 md:h-25 md:w-25 mx-auto" src={'/user-avatar-big.png'} alt="" />
                </div>
                <ul className="bg-gray-200 py-2 px-3 mt-3 divide-y rounded text-center space-y-6">
                    <li className="font-bold text-2xl">{user.username}</li>
                    <li>Email: {user.email}</li>
                    {/* TODO: EMAIL when viewing own profile*/}
                    <li>Punkty: {user.points}</li>
                    <li>Rozwiązane zadania: {user.solutions.length}</li>
                    <li>Ranking: {user.place}</li>
                    <li>Data dołączenia: {formatDate(user.date_joined)}</li>
                    {/*TODO: Delete accout button*/}
                </ul>
            </div>

            <div className="flex flex-col justify-center items-center md:w-8/12 bg-white w-full md:rounded-md rounded-b-md text-center shadow-2xl ">
                <RecentlySolved solves={user.solutions} />
                <ProgressStats />
            </div>
        </div>
    );
};

export default UserProfileComponent;

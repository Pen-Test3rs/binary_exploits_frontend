import React from 'react';
import { RouteComponentProps } from 'react-router-dom';
import { UserData } from '../../models/user';
import { profileService } from '../../services/profileService';
import ProfileContents from './profileContents';
import useAxiosEffect from '../generic/useAxiosEffect';
import ComponentStateHandler from '../generic/componentStateHandler';

type TParams = {
    id: string;
};

const UserProfileComponent = ({ match }: RouteComponentProps<TParams>) => {
    const id = match.params.id;
    const state = useAxiosEffect<UserData>((opt) => profileService.get(id, opt), []);
    const userData = state.data as UserData;

    return <ComponentStateHandler state={state}>
        <ProfileContents userData={userData} />
    </ComponentStateHandler>
};

export default UserProfileComponent;

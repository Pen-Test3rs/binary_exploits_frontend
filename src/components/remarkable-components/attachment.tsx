import { CgAttachment } from 'react-icons/all';
import React, { PropsWithChildren } from 'react';
import fileDownload from 'js-file-download';
import { attachmentService } from '../../services/attachmentService';

interface AttachmentInterface {
    href: string;
}

const Attachment = ({ href, children }: PropsWithChildren<AttachmentInterface>) => {
    const filename = href.split('/').pop();
    return (
        <a
            href={href}
            rel="noreferrer"
            download={filename}
            className="py-1 px-2 rounded shadow w-min whitespace-nowrap text-indigo-700 hover:text-gray-200 bg-gray-200 hover:bg-indigo-700 inline-block mt-1 mb-2"
            onClick={(e) => {
                e.preventDefault();
                attachmentService.get(href).then((res) => fileDownload(res, filename as string));
            }}
        >
            <CgAttachment className={'inline-flex mr-1'} />
            {children}
        </a>
    );
};

export default Attachment;

import Modal from 'react-modal';
import React, { useState } from 'react';
import SettingsContainer from '../styled-components/settings/SettingsContainer';
import { useAppSelector } from '../../context/hooks';
import { currentUserData } from '../../context/userReducer';
import Button from '../styled-components/settings/button';
import SettingText from '../styled-components/settings/settingText';

const SettingsComponent = () => {
    const user = useAppSelector(currentUserData);
    const [modalIsOpen, setModalIsOpen] = useState(false);

    return (
        <>
            <SettingsContainer>
                <ul className="list-none space-y-4">
                    <li>
                        <SettingText>Twój nick: {user.username} </SettingText>
                        <Button onClick={() => setModalIsOpen(true)}>Zmień</Button>
                    </li>
                    <li>
                        <SettingText>Twój email: {user.email} </SettingText>
                        <Button onClick={() => setModalIsOpen(true)}>Zmień</Button>
                    </li>
                    <li className="inline-flex w-full space-x-4 justify-center">
                        <Button onClick={() => setModalIsOpen(true)}>Zmień hasło</Button>
                        <Button $color="red-600" $hoverColor="red-800" onClick={() => setModalIsOpen(true)}>
                            Usuń konto
                        </Button>
                    </li>
                </ul>
            </SettingsContainer>
            <Modal
                isOpen={modalIsOpen}
                shouldCloseOnEsc={true}
                shouldCloseOnOverlayClick={true}
                onRequestClose={() => setModalIsOpen(false)}
                overlayClassName="fixed inset-0 w-full h-full bg-gray-300 flex justify-center items-center bg-opacity-75"
                className="py-5 absolute bg-white overflow-auto h-11/12 w-5/6 md:max-h-4/6 md:w-4/6 lg:w-1/2 shadow rounded focus:outline-none" //todo: tailwind styles
            >
                <button
                    onClick={() => setModalIsOpen(false)}
                    className="absolute right-4 top-5 focus:outline-none opacity-30"
                >
                    {/*TODO: Move this svg to separate component*/}
                    <svg
                        className="fill-current text-black"
                        xmlns="http://www.w3.org/2000/svg"
                        width="27"
                        height="27"
                        viewBox="0 0 18 18"
                    >
                        <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z" />
                    </svg>
                </button>
                Tu formularze z danymi, ale jak to zrobić....
            </Modal>
        </>
    );
};

export default SettingsComponent;
